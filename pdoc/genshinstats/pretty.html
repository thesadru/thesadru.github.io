<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>genshinstats.pretty API documentation</title>
<meta name="description" content="Prettifiers for genshinstats api returns …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>genshinstats.pretty</code></h1>
</header>
<section id="section-intro">
<p>Prettifiers for genshinstats api returns.</p>
<p>Fixes the huge problem of outdated field names in the api,
that were leftover from during development</p>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L1-L459" class="git-link">Browse git</a>
</summary>
<pre><code class="python">&#34;&#34;&#34;Prettifiers for genshinstats api returns.

Fixes the huge problem of outdated field names in the api,
that were leftover from during development
&#34;&#34;&#34;
import re
from datetime import datetime

character_icons = {
    &#34;PlayerGirl&#34;: &#34;Traveler&#34;,
    &#34;PlayerBoy&#34;: &#34;Traveler&#34;,
    &#34;Ambor&#34;: &#34;Amber&#34;,
    &#34;Qin&#34;: &#34;Jean&#34;,
    &#34;Hutao&#34;: &#34;Hu Tao&#34;,
    &#34;Feiyan&#34;: &#34;Yanfei&#34;,
    &#34;Kazuha&#34;: &#34;Kadehara Kazuha&#34;,
    &#34;Sara&#34;: &#34;Kujou Sara&#34;,
    &#34;Shougun&#34;: &#34;Raiden Shogun&#34;,
    &#34;Tohma&#34;: &#34;Thoma&#34;,
}


def _recognize_character_icon(url: str) -&gt; str:
    &#34;&#34;&#34;Recognizes a character&#39;s icon url and returns its name.&#34;&#34;&#34;
    exp = r&#34;game_record/genshin/character_.*_(\w+)(?:@\dx)?.png&#34;
    match = re.search(exp, url)
    if match is None:
        raise ValueError(f&#34;{url!r} is not a character icon or image url&#34;)
    character = match.group(1)
    return character_icons.get(character) or character


def prettify_stats(data):
    s = data[&#34;stats&#34;]
    h = data[&#34;homes&#34;][0] if data[&#34;homes&#34;] else None
    return {
        &#34;stats&#34;: {
            &#34;achievements&#34;: s[&#34;achievement_number&#34;],
            &#34;active_days&#34;: s[&#34;active_day_number&#34;],
            &#34;characters&#34;: s[&#34;avatar_number&#34;],
            &#34;spiral_abyss&#34;: s[&#34;spiral_abyss&#34;],
            &#34;anemoculi&#34;: s[&#34;anemoculus_number&#34;],
            &#34;geoculi&#34;: s[&#34;geoculus_number&#34;],
            &#34;electroculi&#34;: s[&#34;electroculus_number&#34;],
            &#34;common_chests&#34;: s[&#34;common_chest_number&#34;],
            &#34;exquisite_chests&#34;: s[&#34;exquisite_chest_number&#34;],
            &#34;precious_chests&#34;: s[&#34;precious_chest_number&#34;],
            &#34;luxurious_chests&#34;: s[&#34;luxurious_chest_number&#34;],
            &#34;unlocked_waypoints&#34;: s[&#34;way_point_number&#34;],
            &#34;unlocked_domains&#34;: s[&#34;domain_number&#34;],
        },
        &#34;characters&#34;: [
            {
                &#34;name&#34;: i[&#34;name&#34;],
                &#34;rarity&#34;: i[&#34;rarity&#34;]
                if i[&#34;rarity&#34;] &lt; 100
                else i[&#34;rarity&#34;] - 100,  # aloy has 105 stars
                &#34;element&#34;: i[&#34;element&#34;],
                &#34;level&#34;: i[&#34;level&#34;],
                &#34;friendship&#34;: i[&#34;fetter&#34;],
                &#34;icon&#34;: i[&#34;image&#34;],
                &#34;id&#34;: i[&#34;id&#34;],
            }
            for i in data[&#34;avatars&#34;]
        ],
        &#34;teapot&#34;: {
            # only unique data between realms are names and icons
            &#34;realms&#34;: [{&#34;name&#34;: s[&#34;name&#34;], &#34;icon&#34;: s[&#34;icon&#34;]} for s in data[&#34;homes&#34;]],
            &#34;level&#34;: h[&#34;level&#34;],
            &#34;comfort&#34;: h[&#34;comfort_num&#34;],
            &#34;comfort_name&#34;: h[&#34;comfort_level_name&#34;],
            &#34;comfort_icon&#34;: h[&#34;comfort_level_icon&#34;],
            &#34;items&#34;: h[&#34;item_num&#34;],
            &#34;visitors&#34;: h[&#34;visit_num&#34;],  # currently not in use
        }
        if h
        else None,
        &#34;explorations&#34;: [
            {
                &#34;name&#34;: i[&#34;name&#34;],
                &#34;explored&#34;: round(i[&#34;exploration_percentage&#34;] / 10, 1),
                &#34;type&#34;: i[&#34;type&#34;],
                &#34;level&#34;: i[&#34;level&#34;],
                &#34;icon&#34;: i[&#34;icon&#34;],
                &#34;offerings&#34;: i[&#34;offerings&#34;],
            }
            for i in data[&#34;world_explorations&#34;]
        ],
    }


def prettify_characters(data):
    return [
        {
            &#34;name&#34;: i[&#34;name&#34;],
            &#34;rarity&#34;: i[&#34;rarity&#34;] if i[&#34;rarity&#34;] &lt; 100 else i[&#34;rarity&#34;] - 100,  # aloy has 105 stars
            &#34;element&#34;: i[&#34;element&#34;],
            &#34;level&#34;: i[&#34;level&#34;],
            &#34;friendship&#34;: i[&#34;fetter&#34;],
            &#34;constellation&#34;: sum(c[&#34;is_actived&#34;] for c in i[&#34;constellations&#34;]),
            &#34;icon&#34;: i[&#34;icon&#34;],
            &#34;image&#34;: i[&#34;image&#34;],
            &#34;id&#34;: i[&#34;id&#34;],
            &#34;collab&#34;: i[&#34;rarity&#34;] &gt;= 100,
            **(
                {&#34;traveler_name&#34;: &#34;Aether&#34; if &#34;Boy&#34; in i[&#34;icon&#34;] else &#34;Lumine&#34;}
                if &#34;Player&#34; in i[&#34;icon&#34;]
                else {}
            ),
            &#34;weapon&#34;: {
                &#34;name&#34;: i[&#34;weapon&#34;][&#34;name&#34;],
                &#34;rarity&#34;: i[&#34;weapon&#34;][&#34;rarity&#34;],
                &#34;type&#34;: i[&#34;weapon&#34;][&#34;type_name&#34;],
                &#34;level&#34;: i[&#34;weapon&#34;][&#34;level&#34;],
                &#34;ascension&#34;: i[&#34;weapon&#34;][&#34;promote_level&#34;],
                &#34;refinement&#34;: i[&#34;weapon&#34;][&#34;affix_level&#34;],
                &#34;description&#34;: i[&#34;weapon&#34;][&#34;desc&#34;],
                &#34;icon&#34;: i[&#34;weapon&#34;][&#34;icon&#34;],
                &#34;id&#34;: i[&#34;weapon&#34;][&#34;id&#34;],
            },
            &#34;artifacts&#34;: [
                {
                    &#34;name&#34;: a[&#34;name&#34;],
                    &#34;pos_name&#34;: {
                        1: &#34;flower&#34;,
                        2: &#34;feather&#34;,
                        3: &#34;hourglass&#34;,
                        4: &#34;goblet&#34;,
                        5: &#34;crown&#34;,
                    }[a[&#34;pos&#34;]],
                    &#34;full_pos_name&#34;: a[&#34;pos_name&#34;],
                    &#34;pos&#34;: a[&#34;pos&#34;],
                    &#34;rarity&#34;: a[&#34;rarity&#34;],
                    &#34;level&#34;: a[&#34;level&#34;],
                    &#34;set&#34;: {
                        &#34;name&#34;: a[&#34;set&#34;][&#34;name&#34;],
                        &#34;effect_type&#34;: [&#34;none&#34;, &#34;single&#34;, &#34;classic&#34;][len(a[&#34;set&#34;][&#34;affixes&#34;])],
                        &#34;effects&#34;: [
                            {
                                &#34;pieces&#34;: e[&#34;activation_number&#34;],
                                &#34;effect&#34;: e[&#34;effect&#34;],
                            }
                            for e in a[&#34;set&#34;][&#34;affixes&#34;]
                        ],
                        &#34;set_id&#34;: int(re.search(r&#34;UI_RelicIcon_(\d+)_\d+&#34;, a[&#34;icon&#34;]).group(1)),  # type: ignore
                        &#34;id&#34;: a[&#34;set&#34;][&#34;id&#34;],
                    },
                    &#34;icon&#34;: a[&#34;icon&#34;],
                    &#34;id&#34;: a[&#34;id&#34;],
                }
                for a in i[&#34;reliquaries&#34;]
            ],
            &#34;constellations&#34;: [
                {
                    &#34;name&#34;: c[&#34;name&#34;],
                    &#34;effect&#34;: c[&#34;effect&#34;],
                    &#34;is_activated&#34;: c[&#34;is_actived&#34;],
                    &#34;index&#34;: c[&#34;pos&#34;],
                    &#34;icon&#34;: c[&#34;icon&#34;],
                    &#34;id&#34;: c[&#34;id&#34;],
                }
                for c in i[&#34;constellations&#34;]
            ],
            &#34;outfits&#34;: [
                {&#34;name&#34;: c[&#34;name&#34;], &#34;icon&#34;: c[&#34;icon&#34;], &#34;id&#34;: c[&#34;id&#34;]} for c in i[&#34;costumes&#34;]
            ],
        }
        for i in data
    ]


def prettify_abyss(data):
    fchars = lambda d: [
        {
            &#34;value&#34;: a[&#34;value&#34;],
            &#34;name&#34;: _recognize_character_icon(a[&#34;avatar_icon&#34;]),
            &#34;rarity&#34;: a[&#34;rarity&#34;] if a[&#34;rarity&#34;] &lt; 100 else a[&#34;rarity&#34;] - 100,  # aloy has 105 stars
            &#34;icon&#34;: a[&#34;avatar_icon&#34;],
            &#34;id&#34;: a[&#34;avatar_id&#34;],
        }
        for a in d
    ]
    todate = lambda x: datetime.fromtimestamp(int(x)).strftime(&#34;%Y-%m-%d&#34;)
    totime = lambda x: datetime.fromtimestamp(int(x)).isoformat(&#34; &#34;)
    return {
        &#34;season&#34;: data[&#34;schedule_id&#34;],
        &#34;season_start_time&#34;: todate(data[&#34;start_time&#34;]),
        &#34;season_end_time&#34;: todate(data[&#34;end_time&#34;]),
        &#34;stats&#34;: {
            &#34;total_battles&#34;: data[&#34;total_battle_times&#34;],
            &#34;total_wins&#34;: data[&#34;total_win_times&#34;],
            &#34;max_floor&#34;: data[&#34;max_floor&#34;],
            &#34;total_stars&#34;: data[&#34;total_star&#34;],
        },
        &#34;character_ranks&#34;: {
            &#34;most_played&#34;: fchars(data[&#34;reveal_rank&#34;]),
            &#34;most_kills&#34;: fchars(data[&#34;defeat_rank&#34;]),
            &#34;strongest_strike&#34;: fchars(data[&#34;damage_rank&#34;]),
            &#34;most_damage_taken&#34;: fchars(data[&#34;take_damage_rank&#34;]),
            &#34;most_bursts_used&#34;: fchars(data[&#34;normal_skill_rank&#34;]),
            &#34;most_skills_used&#34;: fchars(data[&#34;energy_skill_rank&#34;]),
        },
        &#34;floors&#34;: [
            {
                &#34;floor&#34;: f[&#34;index&#34;],
                &#34;stars&#34;: f[&#34;star&#34;],
                &#34;max_stars&#34;: f[&#34;max_star&#34;],
                &#34;icon&#34;: f[&#34;icon&#34;],
                &#34;chambers&#34;: [
                    {
                        &#34;chamber&#34;: l[&#34;index&#34;],
                        &#34;stars&#34;: l[&#34;star&#34;],
                        &#34;max_stars&#34;: l[&#34;max_star&#34;],
                        &#34;has_halves&#34;: len(l[&#34;battles&#34;]) == 2,
                        &#34;battles&#34;: [
                            {
                                &#34;half&#34;: b[&#34;index&#34;],
                                &#34;timestamp&#34;: totime(b[&#34;timestamp&#34;]),
                                &#34;characters&#34;: [
                                    {
                                        &#34;name&#34;: _recognize_character_icon(c[&#34;icon&#34;]),
                                        &#34;rarity&#34;: c[&#34;rarity&#34;]
                                        if c[&#34;rarity&#34;] &lt; 100
                                        else c[&#34;rarity&#34;] - 100,  # aloy has 105 stars
                                        &#34;level&#34;: c[&#34;level&#34;],
                                        &#34;icon&#34;: c[&#34;icon&#34;],
                                        &#34;id&#34;: c[&#34;id&#34;],
                                    }
                                    for c in b[&#34;avatars&#34;]
                                ],
                            }
                            for b in l[&#34;battles&#34;]
                        ],
                    }
                    for l in f[&#34;levels&#34;]
                ],
            }
            for f in data[&#34;floors&#34;]
        ],
    }


def prettify_activities(data):
    activities = {
        k: v if v.get(&#34;exists_data&#34;) else {&#34;records&#34;: []}
        for activity in data[&#34;activities&#34;]
        for k, v in activity.items()
    }
    return {
        &#34;hyakunin&#34;: [
            {
                &#34;id&#34;: r[&#34;challenge_id&#34;],
                &#34;name&#34;: r[&#34;challenge_name&#34;],
                &#34;difficulty&#34;: r[&#34;difficulty&#34;],
                &#34;medal_icon&#34;: r[&#34;heraldry_icon&#34;],
                &#34;score&#34;: r[&#34;max_score&#34;],
                &#34;multiplier&#34;: r[&#34;score_multiple&#34;],
                &#34;lineups&#34;: [
                    {
                        &#34;characters&#34;: [
                            {
                                &#34;name&#34;: _recognize_character_icon(c[&#34;icon&#34;]),
                                &#34;rarity&#34;: c[&#34;rarity&#34;]
                                if c[&#34;rarity&#34;] &lt; 100
                                else c[&#34;rarity&#34;] - 100,  # aloy has 105 stars
                                &#34;level&#34;: c[&#34;level&#34;],
                                &#34;icon&#34;: c[&#34;icon&#34;],
                                &#34;id&#34;: c[&#34;id&#34;],
                                &#34;trial&#34;: c[&#34;is_trail_avatar&#34;],
                            }
                            for c in l[&#34;avatars&#34;]
                        ],
                        &#34;skills&#34;: [
                            {&#34;name&#34;: s[&#34;name&#34;], &#34;desc&#34;: s[&#34;desc&#34;], &#34;icon&#34;: s[&#34;icon&#34;], &#34;id&#34;: s[&#34;id&#34;]}
                            for s in l[&#34;skills&#34;]
                        ],
                    }
                    for l in r[&#34;lineups&#34;]
                ],
            }
            for r in activities[&#34;sumo&#34;][&#34;records&#34;]
        ],
        &#34;labyrinth&#34;: None,
    }


def prettify_notes(data):
    return {
        &#34;resin&#34;: data[&#34;current_resin&#34;],
        &#34;until_resin_limit&#34;: data[&#34;resin_recovery_time&#34;],
        &#34;max_resin&#34;: data[&#34;max_resin&#34;],
        &#34;total_commissions&#34;: data[&#34;total_task_num&#34;],
        &#34;completed_commissions&#34;: data[&#34;finished_task_num&#34;],
        &#34;claimed_commission_reward&#34;: data[&#34;is_extra_task_reward_received&#34;],
        &#34;max_boss_discounts&#34;: data[&#34;resin_discount_num_limit&#34;],
        &#34;remaining_boss_discounts&#34;: data[&#34;remain_resin_discount_num&#34;],
        &#34;expeditions&#34;: [
            {
                &#34;icon&#34;: exp[&#34;avatar_side_icon&#34;],
                &#34;remaining_time&#34;: exp[&#34;remained_time&#34;],
                &#34;status&#34;: exp[&#34;status&#34;],
            }
            for exp in data[&#34;expeditions&#34;]
        ],
        &#34;max_expeditions&#34;: data[&#34;max_expedition_num&#34;],
    }


def prettify_game_accounts(data):
    return [
        {
            &#34;uid&#34;: int(a[&#34;game_uid&#34;]),
            &#34;server&#34;: a[&#34;region_name&#34;],
            &#34;level&#34;: a[&#34;level&#34;],
            &#34;nickname&#34;: a[&#34;nickname&#34;],
            # idk what these are for:
            &#34;biz&#34;: a[&#34;game_biz&#34;],
            &#34;is_chosen&#34;: a[&#34;is_chosen&#34;],
            &#34;is_official&#34;: a[&#34;is_official&#34;],
        }
        for a in data
    ]


def prettify_wish_history(data, banner_name=None):
    return [
        {
            &#34;type&#34;: i[&#34;item_type&#34;],
            &#34;name&#34;: i[&#34;name&#34;],
            &#34;rarity&#34;: int(i[&#34;rank_type&#34;]),
            &#34;time&#34;: i[&#34;time&#34;],
            &#34;id&#34;: int(i[&#34;id&#34;]),
            &#34;banner&#34;: banner_name,
            &#34;banner_type&#34;: int(i[&#34;gacha_type&#34;]),
            &#34;uid&#34;: int(i[&#34;uid&#34;]),
        }
        for i in data
    ]


def prettify_gacha_items(data):
    return [
        {
            &#34;name&#34;: i[&#34;name&#34;],
            &#34;type&#34;: i[&#34;item_type&#34;],
            &#34;rarity&#34;: int(i[&#34;rank_type&#34;]),
            &#34;id&#34;: 10000000 + int(i[&#34;item_id&#34;]) - 1000
            if len(i[&#34;item_id&#34;]) == 4
            else int(i[&#34;item_id&#34;]),
        }
        for i in data
    ]


def prettify_banner_details(data):
    per = lambda p: None if p == &#34;0%&#34; else float(p[:-1].replace(&#34;,&#34;, &#34;.&#34;))
    fprobs = (
        lambda l: [
            {
                &#34;type&#34;: i[&#34;item_type&#34;],
                &#34;name&#34;: i[&#34;item_name&#34;],
                &#34;rarity&#34;: int(i[&#34;rank&#34;]),
                &#34;is_up&#34;: bool(i[&#34;is_up&#34;]),
                &#34;order_value&#34;: i[&#34;order_value&#34;],
            }
            for i in l
        ]
        if l
        else []
    )
    fitems = (
        lambda l: [
            {
                &#34;type&#34;: i[&#34;item_type&#34;],
                &#34;name&#34;: i[&#34;item_name&#34;],
                &#34;element&#34;: {
                    &#34;风&#34;: &#34;Anemo&#34;,
                    &#34;火&#34;: &#34;Pyro&#34;,
                    &#34;水&#34;: &#34;Hydro&#34;,
                    &#34;雷&#34;: &#34;Electro&#34;,
                    &#34;冰&#34;: &#34;Cryo&#34;,
                    &#34;岩&#34;: &#34;Geo&#34;,
                    &#34;？&#34;: &#34;Dendro&#34;,
                    &#34;&#34;: None,
                }[i[&#34;item_attr&#34;]],
                &#34;icon&#34;: i[&#34;item_img&#34;],
            }
            for i in l
        ]
        if l
        else []
    )
    return {
        &#34;banner_type_name&#34;: {
            100: &#34;Novice Wishes&#34;,
            200: &#34;Permanent Wish&#34;,
            301: &#34;Character Event Wish&#34;,
            302: &#34;Weapon Event Wish&#34;,
        }[int(data[&#34;gacha_type&#34;])],
        &#34;banner_type&#34;: int(data[&#34;gacha_type&#34;]),
        &#34;banner&#34;: re.sub(r&#34;&lt;.*?&gt;&#34;, &#34;&#34;, data[&#34;title&#34;]).strip(),
        &#34;title&#34;: data[&#34;title&#34;],
        &#34;content&#34;: data[&#34;content&#34;],
        &#34;date_range&#34;: data[&#34;date_range&#34;],
        &#34;r5_up_prob&#34;: per(data[&#34;r5_up_prob&#34;]),  # probability for rate-up 5*
        &#34;r4_up_prob&#34;: per(data[&#34;r4_up_prob&#34;]),  # probability for rate-up 4*
        &#34;r5_prob&#34;: per(data[&#34;r5_prob&#34;]),  # probability for 5*
        &#34;r4_prob&#34;: per(data[&#34;r4_prob&#34;]),  # probability for 4*
        &#34;r3_prob&#34;: per(data[&#34;r3_prob&#34;]),  # probability for 3*
        &#34;r5_guarantee_prob&#34;: per(data[&#34;r5_baodi_prob&#34;]),  # probability for 5* incl. guarantee
        &#34;r4_guarantee_prob&#34;: per(data[&#34;r4_baodi_prob&#34;]),  # probability for 4* incl. guarantee
        &#34;r3_guarantee_prob&#34;: per(data[&#34;r3_baodi_prob&#34;]),  # probability for 3* incl. guarantee
        &#34;r5_up_items&#34;: fitems(
            data[&#34;r5_up_items&#34;]
        ),  # list of 5* rate-up items that you can get from banner
        &#34;r4_up_items&#34;: fitems(
            data[&#34;r4_up_items&#34;]
        ),  # list of 4* rate-up items that you can get from banner
        &#34;r5_items&#34;: fprobs(data[&#34;r5_prob_list&#34;]),  # list 5* of items that you can get from banner
        &#34;r4_items&#34;: fprobs(data[&#34;r4_prob_list&#34;]),  # list 4* of items that you can get from banner
        &#34;r3_items&#34;: fprobs(data[&#34;r3_prob_list&#34;]),  # list 3* of items that you can get from banner
        &#34;items&#34;: fprobs(
            sorted(
                data[&#34;r5_prob_list&#34;] + data[&#34;r4_prob_list&#34;] + data[&#34;r3_prob_list&#34;],
                key=lambda x: x[&#34;order_value&#34;],
            )
        ),
    }


def prettify_trans(data, reasons={}):
    if data and &#34;name&#34; in data[0]:
        # transaction item
        return [
            {
                &#34;time&#34;: i[&#34;time&#34;],
                &#34;name&#34;: i[&#34;name&#34;],
                &#34;rarity&#34;: int(i[&#34;rank&#34;]),
                &#34;amount&#34;: int(i[&#34;add_num&#34;]),
                &#34;reason&#34;: reasons.get(int(i[&#34;reason&#34;]), &#34;&#34;),
                &#34;reason_id&#34;: int(i[&#34;reason&#34;]),
                &#34;uid&#34;: int(i[&#34;uid&#34;]),
                &#34;id&#34;: int(i[&#34;id&#34;]),
            }
            for i in data
        ]
    else:
        # transaction
        return [
            {
                &#34;time&#34;: i[&#34;time&#34;],
                &#34;amount&#34;: int(i[&#34;add_num&#34;]),
                &#34;reason&#34;: reasons.get(int(i[&#34;reason&#34;]), &#34;&#34;),
                &#34;reason_id&#34;: int(i[&#34;reason&#34;]),
                &#34;uid&#34;: int(i[&#34;uid&#34;]),
                &#34;id&#34;: int(i[&#34;id&#34;]),
            }
            for i in data
        ]</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="genshinstats.pretty.prettify_abyss"><code class="name flex">
<span>def <span class="ident">prettify_abyss</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L172-L240" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prettify_abyss(data):
    fchars = lambda d: [
        {
            &#34;value&#34;: a[&#34;value&#34;],
            &#34;name&#34;: _recognize_character_icon(a[&#34;avatar_icon&#34;]),
            &#34;rarity&#34;: a[&#34;rarity&#34;] if a[&#34;rarity&#34;] &lt; 100 else a[&#34;rarity&#34;] - 100,  # aloy has 105 stars
            &#34;icon&#34;: a[&#34;avatar_icon&#34;],
            &#34;id&#34;: a[&#34;avatar_id&#34;],
        }
        for a in d
    ]
    todate = lambda x: datetime.fromtimestamp(int(x)).strftime(&#34;%Y-%m-%d&#34;)
    totime = lambda x: datetime.fromtimestamp(int(x)).isoformat(&#34; &#34;)
    return {
        &#34;season&#34;: data[&#34;schedule_id&#34;],
        &#34;season_start_time&#34;: todate(data[&#34;start_time&#34;]),
        &#34;season_end_time&#34;: todate(data[&#34;end_time&#34;]),
        &#34;stats&#34;: {
            &#34;total_battles&#34;: data[&#34;total_battle_times&#34;],
            &#34;total_wins&#34;: data[&#34;total_win_times&#34;],
            &#34;max_floor&#34;: data[&#34;max_floor&#34;],
            &#34;total_stars&#34;: data[&#34;total_star&#34;],
        },
        &#34;character_ranks&#34;: {
            &#34;most_played&#34;: fchars(data[&#34;reveal_rank&#34;]),
            &#34;most_kills&#34;: fchars(data[&#34;defeat_rank&#34;]),
            &#34;strongest_strike&#34;: fchars(data[&#34;damage_rank&#34;]),
            &#34;most_damage_taken&#34;: fchars(data[&#34;take_damage_rank&#34;]),
            &#34;most_bursts_used&#34;: fchars(data[&#34;normal_skill_rank&#34;]),
            &#34;most_skills_used&#34;: fchars(data[&#34;energy_skill_rank&#34;]),
        },
        &#34;floors&#34;: [
            {
                &#34;floor&#34;: f[&#34;index&#34;],
                &#34;stars&#34;: f[&#34;star&#34;],
                &#34;max_stars&#34;: f[&#34;max_star&#34;],
                &#34;icon&#34;: f[&#34;icon&#34;],
                &#34;chambers&#34;: [
                    {
                        &#34;chamber&#34;: l[&#34;index&#34;],
                        &#34;stars&#34;: l[&#34;star&#34;],
                        &#34;max_stars&#34;: l[&#34;max_star&#34;],
                        &#34;has_halves&#34;: len(l[&#34;battles&#34;]) == 2,
                        &#34;battles&#34;: [
                            {
                                &#34;half&#34;: b[&#34;index&#34;],
                                &#34;timestamp&#34;: totime(b[&#34;timestamp&#34;]),
                                &#34;characters&#34;: [
                                    {
                                        &#34;name&#34;: _recognize_character_icon(c[&#34;icon&#34;]),
                                        &#34;rarity&#34;: c[&#34;rarity&#34;]
                                        if c[&#34;rarity&#34;] &lt; 100
                                        else c[&#34;rarity&#34;] - 100,  # aloy has 105 stars
                                        &#34;level&#34;: c[&#34;level&#34;],
                                        &#34;icon&#34;: c[&#34;icon&#34;],
                                        &#34;id&#34;: c[&#34;id&#34;],
                                    }
                                    for c in b[&#34;avatars&#34;]
                                ],
                            }
                            for b in l[&#34;battles&#34;]
                        ],
                    }
                    for l in f[&#34;levels&#34;]
                ],
            }
            for f in data[&#34;floors&#34;]
        ],
    }</code></pre>
</details>
</dd>
<dt id="genshinstats.pretty.prettify_activities"><code class="name flex">
<span>def <span class="ident">prettify_activities</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L243-L284" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prettify_activities(data):
    activities = {
        k: v if v.get(&#34;exists_data&#34;) else {&#34;records&#34;: []}
        for activity in data[&#34;activities&#34;]
        for k, v in activity.items()
    }
    return {
        &#34;hyakunin&#34;: [
            {
                &#34;id&#34;: r[&#34;challenge_id&#34;],
                &#34;name&#34;: r[&#34;challenge_name&#34;],
                &#34;difficulty&#34;: r[&#34;difficulty&#34;],
                &#34;medal_icon&#34;: r[&#34;heraldry_icon&#34;],
                &#34;score&#34;: r[&#34;max_score&#34;],
                &#34;multiplier&#34;: r[&#34;score_multiple&#34;],
                &#34;lineups&#34;: [
                    {
                        &#34;characters&#34;: [
                            {
                                &#34;name&#34;: _recognize_character_icon(c[&#34;icon&#34;]),
                                &#34;rarity&#34;: c[&#34;rarity&#34;]
                                if c[&#34;rarity&#34;] &lt; 100
                                else c[&#34;rarity&#34;] - 100,  # aloy has 105 stars
                                &#34;level&#34;: c[&#34;level&#34;],
                                &#34;icon&#34;: c[&#34;icon&#34;],
                                &#34;id&#34;: c[&#34;id&#34;],
                                &#34;trial&#34;: c[&#34;is_trail_avatar&#34;],
                            }
                            for c in l[&#34;avatars&#34;]
                        ],
                        &#34;skills&#34;: [
                            {&#34;name&#34;: s[&#34;name&#34;], &#34;desc&#34;: s[&#34;desc&#34;], &#34;icon&#34;: s[&#34;icon&#34;], &#34;id&#34;: s[&#34;id&#34;]}
                            for s in l[&#34;skills&#34;]
                        ],
                    }
                    for l in r[&#34;lineups&#34;]
                ],
            }
            for r in activities[&#34;sumo&#34;][&#34;records&#34;]
        ],
        &#34;labyrinth&#34;: None,
    }</code></pre>
</details>
</dd>
<dt id="genshinstats.pretty.prettify_banner_details"><code class="name flex">
<span>def <span class="ident">prettify_banner_details</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L355-L428" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prettify_banner_details(data):
    per = lambda p: None if p == &#34;0%&#34; else float(p[:-1].replace(&#34;,&#34;, &#34;.&#34;))
    fprobs = (
        lambda l: [
            {
                &#34;type&#34;: i[&#34;item_type&#34;],
                &#34;name&#34;: i[&#34;item_name&#34;],
                &#34;rarity&#34;: int(i[&#34;rank&#34;]),
                &#34;is_up&#34;: bool(i[&#34;is_up&#34;]),
                &#34;order_value&#34;: i[&#34;order_value&#34;],
            }
            for i in l
        ]
        if l
        else []
    )
    fitems = (
        lambda l: [
            {
                &#34;type&#34;: i[&#34;item_type&#34;],
                &#34;name&#34;: i[&#34;item_name&#34;],
                &#34;element&#34;: {
                    &#34;风&#34;: &#34;Anemo&#34;,
                    &#34;火&#34;: &#34;Pyro&#34;,
                    &#34;水&#34;: &#34;Hydro&#34;,
                    &#34;雷&#34;: &#34;Electro&#34;,
                    &#34;冰&#34;: &#34;Cryo&#34;,
                    &#34;岩&#34;: &#34;Geo&#34;,
                    &#34;？&#34;: &#34;Dendro&#34;,
                    &#34;&#34;: None,
                }[i[&#34;item_attr&#34;]],
                &#34;icon&#34;: i[&#34;item_img&#34;],
            }
            for i in l
        ]
        if l
        else []
    )
    return {
        &#34;banner_type_name&#34;: {
            100: &#34;Novice Wishes&#34;,
            200: &#34;Permanent Wish&#34;,
            301: &#34;Character Event Wish&#34;,
            302: &#34;Weapon Event Wish&#34;,
        }[int(data[&#34;gacha_type&#34;])],
        &#34;banner_type&#34;: int(data[&#34;gacha_type&#34;]),
        &#34;banner&#34;: re.sub(r&#34;&lt;.*?&gt;&#34;, &#34;&#34;, data[&#34;title&#34;]).strip(),
        &#34;title&#34;: data[&#34;title&#34;],
        &#34;content&#34;: data[&#34;content&#34;],
        &#34;date_range&#34;: data[&#34;date_range&#34;],
        &#34;r5_up_prob&#34;: per(data[&#34;r5_up_prob&#34;]),  # probability for rate-up 5*
        &#34;r4_up_prob&#34;: per(data[&#34;r4_up_prob&#34;]),  # probability for rate-up 4*
        &#34;r5_prob&#34;: per(data[&#34;r5_prob&#34;]),  # probability for 5*
        &#34;r4_prob&#34;: per(data[&#34;r4_prob&#34;]),  # probability for 4*
        &#34;r3_prob&#34;: per(data[&#34;r3_prob&#34;]),  # probability for 3*
        &#34;r5_guarantee_prob&#34;: per(data[&#34;r5_baodi_prob&#34;]),  # probability for 5* incl. guarantee
        &#34;r4_guarantee_prob&#34;: per(data[&#34;r4_baodi_prob&#34;]),  # probability for 4* incl. guarantee
        &#34;r3_guarantee_prob&#34;: per(data[&#34;r3_baodi_prob&#34;]),  # probability for 3* incl. guarantee
        &#34;r5_up_items&#34;: fitems(
            data[&#34;r5_up_items&#34;]
        ),  # list of 5* rate-up items that you can get from banner
        &#34;r4_up_items&#34;: fitems(
            data[&#34;r4_up_items&#34;]
        ),  # list of 4* rate-up items that you can get from banner
        &#34;r5_items&#34;: fprobs(data[&#34;r5_prob_list&#34;]),  # list 5* of items that you can get from banner
        &#34;r4_items&#34;: fprobs(data[&#34;r4_prob_list&#34;]),  # list 4* of items that you can get from banner
        &#34;r3_items&#34;: fprobs(data[&#34;r3_prob_list&#34;]),  # list 3* of items that you can get from banner
        &#34;items&#34;: fprobs(
            sorted(
                data[&#34;r5_prob_list&#34;] + data[&#34;r4_prob_list&#34;] + data[&#34;r3_prob_list&#34;],
                key=lambda x: x[&#34;order_value&#34;],
            )
        ),
    }</code></pre>
</details>
</dd>
<dt id="genshinstats.pretty.prettify_characters"><code class="name flex">
<span>def <span class="ident">prettify_characters</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L92-L169" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prettify_characters(data):
    return [
        {
            &#34;name&#34;: i[&#34;name&#34;],
            &#34;rarity&#34;: i[&#34;rarity&#34;] if i[&#34;rarity&#34;] &lt; 100 else i[&#34;rarity&#34;] - 100,  # aloy has 105 stars
            &#34;element&#34;: i[&#34;element&#34;],
            &#34;level&#34;: i[&#34;level&#34;],
            &#34;friendship&#34;: i[&#34;fetter&#34;],
            &#34;constellation&#34;: sum(c[&#34;is_actived&#34;] for c in i[&#34;constellations&#34;]),
            &#34;icon&#34;: i[&#34;icon&#34;],
            &#34;image&#34;: i[&#34;image&#34;],
            &#34;id&#34;: i[&#34;id&#34;],
            &#34;collab&#34;: i[&#34;rarity&#34;] &gt;= 100,
            **(
                {&#34;traveler_name&#34;: &#34;Aether&#34; if &#34;Boy&#34; in i[&#34;icon&#34;] else &#34;Lumine&#34;}
                if &#34;Player&#34; in i[&#34;icon&#34;]
                else {}
            ),
            &#34;weapon&#34;: {
                &#34;name&#34;: i[&#34;weapon&#34;][&#34;name&#34;],
                &#34;rarity&#34;: i[&#34;weapon&#34;][&#34;rarity&#34;],
                &#34;type&#34;: i[&#34;weapon&#34;][&#34;type_name&#34;],
                &#34;level&#34;: i[&#34;weapon&#34;][&#34;level&#34;],
                &#34;ascension&#34;: i[&#34;weapon&#34;][&#34;promote_level&#34;],
                &#34;refinement&#34;: i[&#34;weapon&#34;][&#34;affix_level&#34;],
                &#34;description&#34;: i[&#34;weapon&#34;][&#34;desc&#34;],
                &#34;icon&#34;: i[&#34;weapon&#34;][&#34;icon&#34;],
                &#34;id&#34;: i[&#34;weapon&#34;][&#34;id&#34;],
            },
            &#34;artifacts&#34;: [
                {
                    &#34;name&#34;: a[&#34;name&#34;],
                    &#34;pos_name&#34;: {
                        1: &#34;flower&#34;,
                        2: &#34;feather&#34;,
                        3: &#34;hourglass&#34;,
                        4: &#34;goblet&#34;,
                        5: &#34;crown&#34;,
                    }[a[&#34;pos&#34;]],
                    &#34;full_pos_name&#34;: a[&#34;pos_name&#34;],
                    &#34;pos&#34;: a[&#34;pos&#34;],
                    &#34;rarity&#34;: a[&#34;rarity&#34;],
                    &#34;level&#34;: a[&#34;level&#34;],
                    &#34;set&#34;: {
                        &#34;name&#34;: a[&#34;set&#34;][&#34;name&#34;],
                        &#34;effect_type&#34;: [&#34;none&#34;, &#34;single&#34;, &#34;classic&#34;][len(a[&#34;set&#34;][&#34;affixes&#34;])],
                        &#34;effects&#34;: [
                            {
                                &#34;pieces&#34;: e[&#34;activation_number&#34;],
                                &#34;effect&#34;: e[&#34;effect&#34;],
                            }
                            for e in a[&#34;set&#34;][&#34;affixes&#34;]
                        ],
                        &#34;set_id&#34;: int(re.search(r&#34;UI_RelicIcon_(\d+)_\d+&#34;, a[&#34;icon&#34;]).group(1)),  # type: ignore
                        &#34;id&#34;: a[&#34;set&#34;][&#34;id&#34;],
                    },
                    &#34;icon&#34;: a[&#34;icon&#34;],
                    &#34;id&#34;: a[&#34;id&#34;],
                }
                for a in i[&#34;reliquaries&#34;]
            ],
            &#34;constellations&#34;: [
                {
                    &#34;name&#34;: c[&#34;name&#34;],
                    &#34;effect&#34;: c[&#34;effect&#34;],
                    &#34;is_activated&#34;: c[&#34;is_actived&#34;],
                    &#34;index&#34;: c[&#34;pos&#34;],
                    &#34;icon&#34;: c[&#34;icon&#34;],
                    &#34;id&#34;: c[&#34;id&#34;],
                }
                for c in i[&#34;constellations&#34;]
            ],
            &#34;outfits&#34;: [
                {&#34;name&#34;: c[&#34;name&#34;], &#34;icon&#34;: c[&#34;icon&#34;], &#34;id&#34;: c[&#34;id&#34;]} for c in i[&#34;costumes&#34;]
            ],
        }
        for i in data
    ]</code></pre>
</details>
</dd>
<dt id="genshinstats.pretty.prettify_gacha_items"><code class="name flex">
<span>def <span class="ident">prettify_gacha_items</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L341-L352" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prettify_gacha_items(data):
    return [
        {
            &#34;name&#34;: i[&#34;name&#34;],
            &#34;type&#34;: i[&#34;item_type&#34;],
            &#34;rarity&#34;: int(i[&#34;rank_type&#34;]),
            &#34;id&#34;: 10000000 + int(i[&#34;item_id&#34;]) - 1000
            if len(i[&#34;item_id&#34;]) == 4
            else int(i[&#34;item_id&#34;]),
        }
        for i in data
    ]</code></pre>
</details>
</dd>
<dt id="genshinstats.pretty.prettify_game_accounts"><code class="name flex">
<span>def <span class="ident">prettify_game_accounts</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L309-L322" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prettify_game_accounts(data):
    return [
        {
            &#34;uid&#34;: int(a[&#34;game_uid&#34;]),
            &#34;server&#34;: a[&#34;region_name&#34;],
            &#34;level&#34;: a[&#34;level&#34;],
            &#34;nickname&#34;: a[&#34;nickname&#34;],
            # idk what these are for:
            &#34;biz&#34;: a[&#34;game_biz&#34;],
            &#34;is_chosen&#34;: a[&#34;is_chosen&#34;],
            &#34;is_official&#34;: a[&#34;is_official&#34;],
        }
        for a in data
    ]</code></pre>
</details>
</dd>
<dt id="genshinstats.pretty.prettify_notes"><code class="name flex">
<span>def <span class="ident">prettify_notes</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L287-L306" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prettify_notes(data):
    return {
        &#34;resin&#34;: data[&#34;current_resin&#34;],
        &#34;until_resin_limit&#34;: data[&#34;resin_recovery_time&#34;],
        &#34;max_resin&#34;: data[&#34;max_resin&#34;],
        &#34;total_commissions&#34;: data[&#34;total_task_num&#34;],
        &#34;completed_commissions&#34;: data[&#34;finished_task_num&#34;],
        &#34;claimed_commission_reward&#34;: data[&#34;is_extra_task_reward_received&#34;],
        &#34;max_boss_discounts&#34;: data[&#34;resin_discount_num_limit&#34;],
        &#34;remaining_boss_discounts&#34;: data[&#34;remain_resin_discount_num&#34;],
        &#34;expeditions&#34;: [
            {
                &#34;icon&#34;: exp[&#34;avatar_side_icon&#34;],
                &#34;remaining_time&#34;: exp[&#34;remained_time&#34;],
                &#34;status&#34;: exp[&#34;status&#34;],
            }
            for exp in data[&#34;expeditions&#34;]
        ],
        &#34;max_expeditions&#34;: data[&#34;max_expedition_num&#34;],
    }</code></pre>
</details>
</dd>
<dt id="genshinstats.pretty.prettify_stats"><code class="name flex">
<span>def <span class="ident">prettify_stats</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L33-L89" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prettify_stats(data):
    s = data[&#34;stats&#34;]
    h = data[&#34;homes&#34;][0] if data[&#34;homes&#34;] else None
    return {
        &#34;stats&#34;: {
            &#34;achievements&#34;: s[&#34;achievement_number&#34;],
            &#34;active_days&#34;: s[&#34;active_day_number&#34;],
            &#34;characters&#34;: s[&#34;avatar_number&#34;],
            &#34;spiral_abyss&#34;: s[&#34;spiral_abyss&#34;],
            &#34;anemoculi&#34;: s[&#34;anemoculus_number&#34;],
            &#34;geoculi&#34;: s[&#34;geoculus_number&#34;],
            &#34;electroculi&#34;: s[&#34;electroculus_number&#34;],
            &#34;common_chests&#34;: s[&#34;common_chest_number&#34;],
            &#34;exquisite_chests&#34;: s[&#34;exquisite_chest_number&#34;],
            &#34;precious_chests&#34;: s[&#34;precious_chest_number&#34;],
            &#34;luxurious_chests&#34;: s[&#34;luxurious_chest_number&#34;],
            &#34;unlocked_waypoints&#34;: s[&#34;way_point_number&#34;],
            &#34;unlocked_domains&#34;: s[&#34;domain_number&#34;],
        },
        &#34;characters&#34;: [
            {
                &#34;name&#34;: i[&#34;name&#34;],
                &#34;rarity&#34;: i[&#34;rarity&#34;]
                if i[&#34;rarity&#34;] &lt; 100
                else i[&#34;rarity&#34;] - 100,  # aloy has 105 stars
                &#34;element&#34;: i[&#34;element&#34;],
                &#34;level&#34;: i[&#34;level&#34;],
                &#34;friendship&#34;: i[&#34;fetter&#34;],
                &#34;icon&#34;: i[&#34;image&#34;],
                &#34;id&#34;: i[&#34;id&#34;],
            }
            for i in data[&#34;avatars&#34;]
        ],
        &#34;teapot&#34;: {
            # only unique data between realms are names and icons
            &#34;realms&#34;: [{&#34;name&#34;: s[&#34;name&#34;], &#34;icon&#34;: s[&#34;icon&#34;]} for s in data[&#34;homes&#34;]],
            &#34;level&#34;: h[&#34;level&#34;],
            &#34;comfort&#34;: h[&#34;comfort_num&#34;],
            &#34;comfort_name&#34;: h[&#34;comfort_level_name&#34;],
            &#34;comfort_icon&#34;: h[&#34;comfort_level_icon&#34;],
            &#34;items&#34;: h[&#34;item_num&#34;],
            &#34;visitors&#34;: h[&#34;visit_num&#34;],  # currently not in use
        }
        if h
        else None,
        &#34;explorations&#34;: [
            {
                &#34;name&#34;: i[&#34;name&#34;],
                &#34;explored&#34;: round(i[&#34;exploration_percentage&#34;] / 10, 1),
                &#34;type&#34;: i[&#34;type&#34;],
                &#34;level&#34;: i[&#34;level&#34;],
                &#34;icon&#34;: i[&#34;icon&#34;],
                &#34;offerings&#34;: i[&#34;offerings&#34;],
            }
            for i in data[&#34;world_explorations&#34;]
        ],
    }</code></pre>
</details>
</dd>
<dt id="genshinstats.pretty.prettify_trans"><code class="name flex">
<span>def <span class="ident">prettify_trans</span></span>(<span>data, reasons={})</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L431-L459" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prettify_trans(data, reasons={}):
    if data and &#34;name&#34; in data[0]:
        # transaction item
        return [
            {
                &#34;time&#34;: i[&#34;time&#34;],
                &#34;name&#34;: i[&#34;name&#34;],
                &#34;rarity&#34;: int(i[&#34;rank&#34;]),
                &#34;amount&#34;: int(i[&#34;add_num&#34;]),
                &#34;reason&#34;: reasons.get(int(i[&#34;reason&#34;]), &#34;&#34;),
                &#34;reason_id&#34;: int(i[&#34;reason&#34;]),
                &#34;uid&#34;: int(i[&#34;uid&#34;]),
                &#34;id&#34;: int(i[&#34;id&#34;]),
            }
            for i in data
        ]
    else:
        # transaction
        return [
            {
                &#34;time&#34;: i[&#34;time&#34;],
                &#34;amount&#34;: int(i[&#34;add_num&#34;]),
                &#34;reason&#34;: reasons.get(int(i[&#34;reason&#34;]), &#34;&#34;),
                &#34;reason_id&#34;: int(i[&#34;reason&#34;]),
                &#34;uid&#34;: int(i[&#34;uid&#34;]),
                &#34;id&#34;: int(i[&#34;id&#34;]),
            }
            for i in data
        ]</code></pre>
</details>
</dd>
<dt id="genshinstats.pretty.prettify_wish_history"><code class="name flex">
<span>def <span class="ident">prettify_wish_history</span></span>(<span>data, banner_name=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/thesadru/genshinstats/blob/master/genshinstats/pretty.py#L325-L338" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def prettify_wish_history(data, banner_name=None):
    return [
        {
            &#34;type&#34;: i[&#34;item_type&#34;],
            &#34;name&#34;: i[&#34;name&#34;],
            &#34;rarity&#34;: int(i[&#34;rank_type&#34;]),
            &#34;time&#34;: i[&#34;time&#34;],
            &#34;id&#34;: int(i[&#34;id&#34;]),
            &#34;banner&#34;: banner_name,
            &#34;banner_type&#34;: int(i[&#34;gacha_type&#34;]),
            &#34;uid&#34;: int(i[&#34;uid&#34;]),
        }
        for i in data
    ]</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<form>
<input id="lunr-search" name="q" placeholder="🔎 Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {width: auto;}
.modal-dialog .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="genshinstats" href="index.html">genshinstats</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="genshinstats.pretty.prettify_abyss" href="#genshinstats.pretty.prettify_abyss">prettify_abyss</a></code></li>
<li><code><a title="genshinstats.pretty.prettify_activities" href="#genshinstats.pretty.prettify_activities">prettify_activities</a></code></li>
<li><code><a title="genshinstats.pretty.prettify_banner_details" href="#genshinstats.pretty.prettify_banner_details">prettify_banner_details</a></code></li>
<li><code><a title="genshinstats.pretty.prettify_characters" href="#genshinstats.pretty.prettify_characters">prettify_characters</a></code></li>
<li><code><a title="genshinstats.pretty.prettify_gacha_items" href="#genshinstats.pretty.prettify_gacha_items">prettify_gacha_items</a></code></li>
<li><code><a title="genshinstats.pretty.prettify_game_accounts" href="#genshinstats.pretty.prettify_game_accounts">prettify_game_accounts</a></code></li>
<li><code><a title="genshinstats.pretty.prettify_notes" href="#genshinstats.pretty.prettify_notes">prettify_notes</a></code></li>
<li><code><a title="genshinstats.pretty.prettify_stats" href="#genshinstats.pretty.prettify_stats">prettify_stats</a></code></li>
<li><code><a title="genshinstats.pretty.prettify_trans" href="#genshinstats.pretty.prettify_trans">prettify_trans</a></code></li>
<li><code><a title="genshinstats.pretty.prettify_wish_history" href="#genshinstats.pretty.prettify_wish_history">prettify_wish_history</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>